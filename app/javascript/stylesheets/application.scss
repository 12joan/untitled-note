@tailwind base;
@tailwind components;
@tailwind utilities;

/* Z-index:
 * 10 - TopBar
 * 20 - Tippy
 * 30 - Modals
 * 40 - Tippy inside modal
 */

@layer base {
  *:focus-visible {
    outline: none;
    @apply ring-2 ring-primary-500 dark:ring-primary-400 border-transparent relative;
  }

  *, ::before, ::after {
    @apply border-slate-200 dark:border-slate-700;
  }

  input::placeholder, textarea::placeholder, [data-slate-placeholder] {
    @apply text-slate-400 dark:text-slate-500;
  }

  button {
    @apply select-none;
  }
}

@layer utilities {
  .text-ui {
    @apply text-slate-700 dark:text-slate-200;
  }

  .transparent-blur {
    @apply bg-page-bg-light/75 dark:bg-page-bg-dark/75 backdrop-blur;
  }

  .no-focus-ring:focus-visible {
    @apply ring-0;
  }

  .group-focus-ring {
    @apply group-focus-visible:ring-primary-500 group-focus-visible:dark:ring-primary-400;
  }

  .overflow-wrap-break-word {
    overflow-wrap: break-word;
  }

  .overflow-wrap-normal {
    overflow-wrap: normal;
  }

  .prose {
    // Prevent overflow when a text contains no spaces
    @apply overflow-wrap-break-word;

    // Prevent overflow in deeply nested lists
    & > ul, & > ol {
      @apply overflow-x-auto;
      @apply overflow-wrap-normal;
    }

    blockquote * {
      // Remove font-weight: 500 for blockquotes
      @apply font-normal;

      // Remove quotation marks for blockquotes
      &::before, &::after {
        content: '';
      }
    }

    // Set link colour
    a {
      @apply text-primary-500 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-500;
    }

    h1 {
      @apply text-2xl font-medium;
    }
  }
}

@layer components {
  .btn {
    @apply rounded-lg cursor-pointer;

    &.btn-transparent {
      @apply hover:bg-slate-100/75 dark:hover:bg-slate-700/75;
    }

    &.btn-transparent-blur {
      @apply transparent-blur hover:bg-slate-100/75 dark:hover:bg-slate-700/75;
    }

    &.btn-solid {
      @apply bg-white dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700;
    }

    &.btn-link {
      @apply text-primary-500 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-500 window-inactive:text-slate-500 dark:window-inactive:text-slate-400;
    }

    &.btn-link-subtle {
      @apply hocus:text-primary-500 dark:hocus:text-primary-400;
    }
  }
}

.tippy-box[data-theme~='custom'] {
  @apply text-inherit bg-slate-100/75 dark:bg-slate-700/75 backdrop-blur font-medium shadow;
}

[data-tippy-root] {
  // Side effect of mounting tooltip as a child of .divide-y
  border: none !important;
  @apply select-none;
}

[data-slate-placeholder] {
  // Fix editor placeholder causing body to scroll horizontally
  width: auto !important;

  // Remove opacity: 0.333 from placeholder
  opacity: 1 !important;
}
